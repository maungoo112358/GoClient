syntax = "proto3";

package gamepacket;
option go_package = "gosocket/gamepacket";

message GamePacket {
  uint32 seq = 1;
  oneof payload {
    HandshakeRequest handshakeRequest = 2;
    HandshakeResponse handshakeResponse = 3;
    LobbyJoinBroadcast lobbyJoinBroadcast = 4;
    ChatMessage chatMessage = 5;
    ClientPosition clientPosition = 6;
    Heartbeat heartbeat = 7;
  }
}


message HandshakeRequest {
  string clientName = 1; // optional nickname from client
}

message HandshakeResponse {
  string privateId = 1;
  string publicId = 2;
}

message LobbyJoinBroadcast {
  string publicId = 1;
  string colorHex = 2;
}

message ClientPosition {
  string clientId = 1; // who sent this
  float x = 2;
  float y = 3;
  float z = 4;
}

message ChatMessage {
  string clientId = 1; // who said it
  string message = 2;
}

message Heartbeat {
  string clientId = 1;
}

